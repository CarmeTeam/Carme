{% extends "two_factor/_base.html" %}
{% load i18n %}
{% load static %}

{% block title%}Login{% endblock %}

{% block subcontent %}

<div class="row flex-center-carme align-middle min-vh-85 py-4">
		<div class="col-sm-10 col-md-8 col-lg-6 col-xl-5 col-xxl-4">
				<div id="login-box">

						<!-- <row> -->
						<div class="row">

								<div class="col-12">
										<!-- logo -->
										<div class="text-center my-4">
												<img class="mb-4" src="/static/img/logo/carme-dark.svg"/>
												<h5 class="fs-6 fw-600 text-title">Carme</h5> 
										</div>
										<!-- </logo> -->
          
										<!-- <alert> -->
										{% if maintenance_mode %}
            <div id="maintenance-message" class="alert alert-warning py-2" role="alert">
              <i class="fas fa-warning pe-1"></i> Maintenance mode on. User access denied. 
            </div>
          {% else %}                    
										  <div id="timeout-message" class="alert alert-warning py-2" role="alert" style="display: none;">
												  <i class="fas fa-warning pe-1"></i> Your session has expired! Log in again.
										  </div>
										  <div id="logout-message" class="alert alert-success py-2" role="alert" style="display: none;">
												  <i class="fas fa-check pe-1"></i> Successfully logged out.
										  </div>
										  {% if form.errors %}
    						  <div id="error-message" class="alert alert-danger py-2" role="alert">
												  <i class="fas fa-times-circle pe-1"></i> Incorrect information. Please Try again.
										  </div>
										  {% endif %}
          {% endif %}
										<!-- </alert> -->
    				</div>

    				<!-- <2FA> -->
    				<form action="" class="col-12" method="post">
    						{% csrf_token %}

    						{% include "two_factor/_wizard_forms.html" %}
    						<input type="submit" value="" class="d-none" />

     					{% if wizard.steps.current == 'auth' %}
										<!-- login page -->
										{% elif wizard.steps.current == 'token' %}
										<!-- authentication page --> 
          	{% if backup_tokens %}
            <p class="fs-0 fw-400 text-body ps-1">
            	{% trans "As a last resort, you can use a backup token." %}
            </p>
           {% else %} 
            <p class="ms-1 fs-0 fw-400 text-body text-justify">
             {% trans "Enter the token generated by your auth app." %}
            </p>
          	{% endif %}
     					{% elif wizard.steps.current == 'backup' %}
											<!-- backup token page-->
     						<p class="ms-1 fs-0 fw-400 text-justify text-body">
												{% blocktrans trimmed %}
       						Please enter one of the backup tokens to login to your account. 
													Notice that these tokens are used only once.
         			{% endblocktrans %}
      	 			</p>
     					{% endif %}
              
     					{% include "two_factor/_wizard_actions.html" %}
    				</form>
    				<!-- </2FA> -->

						</div>
						<!-- </row> -->

						<!-- sponsor -->
   			{% include "two_factor/core/sponsor.html" %}
							 

		  </div>
  </div>
</div>  
{% endblock %}

